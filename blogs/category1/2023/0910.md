---
title: AntDesignVueçš„å‘å’Œæ³¨æ„ç‚¹
date: 2023-09-10
tags:
  - antDesign
categories:
  - å‰ç«¯å¼€å‘
---

### a-selectä¸‹æ‹‰æ¡†ä¸è·Ÿéšé¡µé¢æ»šåŠ¨è€Œç§»åŠ¨çš„è§£å†³æ–¹æ³•
```html
 <a-select :getPopupContainer="triggerNode => triggerNode.parentNode">
```

### a-selectè¾“å…¥è‡ªåŠ¨æœç´¢ä¸‹æ‹‰å†…å®¹åŒ¹é…
```html
 <a-select
    show-search
    :filter-option="(input, option)=>option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0"
  >
```

### a-tableä¸­å¿«é€Ÿè®¾ç½®å…¨å±€ç¼ºçœå€¼
```vue
// è¡¨æ ¼æŸä¸€æ ¼æ²¡æœ‰æ•°æ®æ—¶å±•ç¤ºé»˜è®¤å€¼
.ant-table-tbody {
  td:empty::after{
    content:'-'; 
  }
}
```

### a-tableä¸­çš„column.ellipsisæ²¡æœ‰çœç•¥å·

1. å¯¹äºaæ ‡ç­¾çš„å…ƒç´ ï¼Œè¡¨æ ¼ä¸­éœ€è¦è·³è½¬çš„å…ƒç´ ï¼Œè‹¥æ²¡æœ‰å€¼å°±ä¸èƒ½è·³è½¬çš„ä¼˜åŒ–
2. aæ ‡ç­¾çš„å…ƒç´ ï¼Œhoverä¸Šä¸æç¤ºä¼˜åŒ–ï¼šåŠ ä¸Š title å±æ€§ä¿®å¤
```html
 <template slot="defaultOperationStationName" slot-scope="text,record">
  <span v-show="text">
    <a :title="record.defaultOperationStationNumber+'-'+text" @click="goStation(record.defaultOperationStationId)">
      {{record.defaultOperationStationNumber}}-{{text}}
    </a>
  </span>
  <span v-show="!text"> - </span>
</template>
```

### a-tableåµŒå¥—è¡¨æ ¼è‡ªå®šä¹‰å±•å¼€å›¾æ ‡
- åˆ©ç”¨çˆ¶è¡¨æ ¼çš„expandIconå±æ€§
```vue
template: :expandIcon="customExpandIcon"

methods:{
  customExpandIcon (props) {
    // æ˜¯å¦æœ‰å­é¡¹ï¼Œæ— å­é¡¹ä¸å±•ç¤ºå›¾æ ‡
    // recordæ˜¯æ¯è¡Œçš„æ•°æ®ï¼Œåç«¯è¿”å›çš„æ•°æ®ä¼šæœ‰ä¸€ä¸ªdetailså­—æ®µåˆ¤æ–­æ˜¯å¦æœ‰å­é¡¹
    if (props.record && props.record.details) {
      // props.expanded a-tableç»„ä»¶åˆ¤æ–­æ˜¯å¦å±•å¼€äº†ä¸ºtrueæ˜¯å±•å¼€,falseä¸ºæ²¡å±•å¼€
      if (props.expanded) {
        // onClickäº‹ä»¶å¿…é¡»æ·»åŠ ä¸Šï¼Œç›¸å½“äºæŠŠa-tableé‡Œçš„å±•å¼€äº‹ä»¶ç»™äº†è‡ªå®šä¹‰çš„å›¾æ ‡ï¼Œä¸åŠ çš„è¯ç‚¹å‡»ä¼šå¤±æ•ˆ
        return <a-icon type="caret-down"  onClick={e => { props.onExpand(props.record, e) }} />
      } else {
        return <a-icon type="caret-right" onClick={(e) => { props.onExpand(props.record, e) }} />
      }
    } else {
      return <span style="padding-left: 21px;" />
    }
  },
}
```

### a-tableçš„ç¿»é¡µè¿˜èƒ½ä¿å­˜selectRowsçš„æ€è·¯
```js
template  :row-selection="rowSelection

computed:{
  rowSelection(){
    return{
      selectedRowKeys:this.selectedRowKeys,
      onChange:this.onChange
    }
  }
},

onChange(selectedRowKeys,selectedRows) {
  this.selectedRowKeys = selectedRowKeys;
  if(selectedRowKeys.length===selectedRows.length){
    this.selectedList = selectedRows
  }else{
    this.selectedList = selectedRowKeys.map(key => (
      this.selectedList.find(row => row.id === key) || selectedRows.find(row => row.id === key)//å¤„ç†ç¿»é¡µç¼“å­˜
    ))
  }
},
```
### v-decorator
- ç”¨äº a-form çš„è·å–è¡¨å•æ•°æ®+è¡¨å•éªŒè¯
- data ä¸­å®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œæ ‡ç­¾ä¸­ ['id',options]

:::info
1. ä¸èƒ½å’Œ v-model ä¸€èµ·ä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£è¿˜æœ‰(å¦‚ä¸‹)ï¼Œè‹±æ–‡ç‰ˆä¸æ‡‚ï¼Œé‡åˆ°å®é™…é—®é¢˜å†è¡¥å……

2. ä½¿ç”¨ v-decorator åï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢« form æ¥ç®¡ï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹è¦é€šè¿‡å¯¹ this.form.setFieldValueæ¥å®ç°
:::


### è¾“å…¥æ¡†ä¸­çš„v-modelä¸èƒ½å’Œdefault-valueä¸€èµ·ä½¿ç”¨
```js
: default-valueå’Œchangeäº‹ä»¶ç»“åˆèµ‹å€¼

a-tableæŒ‡å®šè¡¨å¤´åˆ—çš„æ ·å¼ä¿®æ”¹

/deep/.parentTable .ant-table-thead > tr >th:nth-child(2) { 
  width: 225px;
}
antd è¡¨æ ¼ layout æ ·å¼æ›´æ”¹
a-tableåµŒå¥—è¡¨æ ¼çˆ¶å­é€‰æ‹©æ¡†å¯¹é½

//ç¬¬ä¸€æ­¥è®©å­è¡¨æ ¼ç©ºéš™å¤„æ ·å¼åˆ é™¤
/deep/tr.ant-table-expanded-row-level-1>td:first-child{
  display: none;
}
//ç¬¬äºŒæ­¥æ¶ˆé™¤è¡¨æ ¼æ‹‰è‡³å°¾å¤„ç¼ºå°‘ç©ºç™½bug,åœ¨è¡¨æ ¼æ•°æ®æˆåŠŸçš„å‡½æ•°åŠ ä¸Šjs
this.$nextTick(() => {
  let ele = this.$el.querySelectorAll('.childTable')
  ele.forEach(item=>{
      item.parentNode.setAttribute('colSpan', 8)//8çœ‹å®é™…è¡¨æ ¼è°ƒæ•´æ•°ç›®
  })
})
```
### a-tableåµŒå¥—è¡¨æ ¼çˆ¶è¡¨æ ¼åŠ key

- ä¸ºäº†é»˜è®¤å±•å¼€è®¡ç®—é«˜åº¦ æ·»åŠ å”¯ä¸€æ ‡è¯† ä¹‹å‰ç”¨çš„æ˜¯è¡¨æ ¼æ•°æ®çš„é•¿åº¦ ä½†å¦‚æœåˆ‡æ¢æ•°æ®é•¿åº¦ä¸€è‡´ é»˜è®¤å±•å¼€ä¼šå¤±æ•ˆ 
- åµŒå¥—è¡¨æ ¼çš„å­ç»„ä»¶ä¸èƒ½ç”¨childrenç­‰æ•æ„Ÿè¯æ±‡ã€‚æ¶‰åŠåˆ°åº•å±‚é€»è¾‘ï¼Œé¡µé¢ä¼šå¤šå±‚æ¸²æŸ“ï¼ˆğŸ™„è¿™ä¸ªbugæ‰¾äº†å¾ˆä¹…ï¼‰
- :default-valueå¦‚æœå­˜åœ¨ ä¸å†™v-model æ”¹å˜å€¼ä¸ä¼šå˜æ›´
